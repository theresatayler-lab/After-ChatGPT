# Archetype Reference Data for Spell Generation
# This file contains movements, deities, and cultural references for each archetype

ARCHETYPE_REFERENCE_DATA = {
    "shigg": {
        "name": "Shigg",
        "movements": [
            {
                "name": "Cunning Folk",
                "description": "Village healers, herbalists, and protectors; practical, non-ceremonial magic.",
                "key_texts": ["Cunning-Folk: Popular Magic in English History by Owen Davies"],
                "reference_link": "https://en.wikipedia.org/wiki/Cunning_folk"
            },
            {
                "name": "Kitchen Witchcraft",
                "description": "Everyday magic using household items, food, and herbs.",
                "key_texts": ["Kitchen Witchcraft by Rachel Patterson"],
                "reference_link": "https://en.wikipedia.org/wiki/Kitchen_witch"
            },
            {
                "name": "Hedge Witchcraft",
                "description": "Solitary practice, shamanic journeying, herbalism.",
                "key_texts": ["Hedge Witch by Rae Beth"],
                "reference_link": "https://www.learnreligions.com/what-is-hedge-witchcraft-2561654"
            },
            {
                "name": "Druidry",
                "description": "Ancient and modern revivals; nature worship, ritual, poetry.",
                "key_texts": ["Druid Mysteries by Philip Carr-Gomm"],
                "reference_link": "https://druidry.org/"
            },
            {
                "name": "Wicca",
                "description": "Modern pagan witchcraft; rituals, goddess worship, covens.",
                "key_texts": ["Witchcraft Today by Gerald Gardner"],
                "reference_link": "https://en.wikipedia.org/wiki/Wicca"
            },
            {
                "name": "Pendle Witches",
                "description": "Famous 1612 witch trial; folklore, curses, healing.",
                "key_texts": ["The Lancashire Witches by William Harrison Ainsworth"],
                "reference_link": "https://en.wikipedia.org/wiki/Pendle_witches"
            },
            {
                "name": "Animism",
                "description": "Belief that everything has spirit; common in indigenous and folk traditions.",
                "key_texts": ["Animism: Respecting the Living World by Graham Harvey"],
                "reference_link": "https://en.wikipedia.org/wiki/Animism"
            },
            {
                "name": "Birds as Omens",
                "description": "Magpies, crows, robins in British folklore as spiritual messengers.",
                "key_texts": ["British bird omen traditions", "Ornithography by Jessica Roux"],
                "reference_link": "https://www.bbc.co.uk/legacies/myths_legends/england/lincs/article_1.shtml"
            }
        ],
        "deities_figures": [],  # Shigg doesn't work with deities - she works with birds and poetry
        "cultural_references": [
            "Coronation Street",
            "WWII Blitz culture",
            "British bird omens",
            "East End/Dagenham working class",
            "Rubáiyát of Omar Khayyám",
            "Tea ritual traditions"
        ],
        "primary_tools": ["Tea", "Herbs", "Birds", "Poetry", "Rubáiyát verses"],
        "spell_types": ["Daily practice", "Grief and loss", "Acceptance", "Gentle protection", "Seasonal rituals"]
    },
    
    "cathleen": {
        "name": "Cathleen",
        "movements": [
            {
                "name": "British Spiritualism",
                "description": "19th–20th century movement focused on communication with spirits through séances and home circles.",
                "key_texts": ["The History of Spiritualism by Arthur Conan Doyle"],
                "reference_link": "https://www.snu.org.uk/"
            },
            {
                "name": "Folk Catholicism",
                "description": "Blend of Catholic ritual with folk magic and local saints.",
                "key_texts": ["The Stations of the Sun by Ronald Hutton"],
                "reference_link": "https://en.wikipedia.org/wiki/Folk_Catholicism"
            },
            {
                "name": "Celtic Reconstructionism",
                "description": "Modern attempt to reconstruct ancient Celtic religion and practices.",
                "key_texts": ["The Apple Branch by Alexei Kondratiev"],
                "reference_link": "https://en.wikipedia.org/wiki/Celtic_Reconstructionist_Paganism"
            },
            {
                "name": "Fairy Faith",
                "description": "Belief in fairies, spirits, and otherworldly beings in Celtic folklore.",
                "key_texts": ["Visions and Beliefs in the West of Ireland by Lady Gregory"],
                "reference_link": "https://en.wikipedia.org/wiki/Fairy_Faith_in_Celtic_Countries"
            },
            {
                "name": "Irish Folk Catholicism",
                "description": "Integration of Irish Catholicism with folk traditions, music, and mourning rituals.",
                "key_texts": ["The Celtic Twilight by W.B. Yeats"],
                "reference_link": "https://en.wikipedia.org/wiki/The_Celtic_Twilight"
            }
        ],
        "deities_figures": [
            {
                "name": "The Morrigan",
                "type": "Irish goddess",
                "description": "Goddess of war, death, and transformation, often appearing as a crow or raven.",
                "link": "https://mythopedia.com/topics/the-morrigan"
            },
            {
                "name": "Brigid",
                "type": "Irish goddess",
                "description": "Goddess of hearth, healing, and poetry.",
                "link": "https://mythopedia.com/topics/brigid"
            },
            {
                "name": "The Departed",
                "type": "Ancestor spirits",
                "description": "Spirits of loved ones connected through spiritualist practice."
            }
        ],
        "cultural_references": [
            "British Spiritualist churches",
            "Irish immigrant community",
            "WWII home front",
            "East End London",
            "Wigmore Hall performances",
            "Home circle traditions",
            "Yellow flower wallpaper (her home)"
        ],
        "primary_tools": ["Voice", "Song", "Breath", "Talismans", "Brooches"],
        "spell_types": ["Protection", "Grief and comfort", "Spirit communication", "Courage", "Healing"]
    },
    
    "katherine": {
        "name": "Katherine",
        "movements": [
            {
                "name": "Society for Psychical Research (SPR)",
                "description": "Scientific study of psychic phenomena, founded in 1882.",
                "key_texts": ["SPR Proceedings", "Human Personality and Its Survival of Bodily Death by Frederic Myers"],
                "reference_link": "https://www.spr.ac.uk/"
            },
            {
                "name": "Occult Revival / Hermetic Order of the Golden Dawn",
                "description": "19th-century ceremonial magic order focusing on tarot, qabalah, and ritual.",
                "key_texts": ["The Golden Dawn by Israel Regardie"],
                "reference_link": "https://en.wikipedia.org/wiki/Hermetic_Order_of_the_Golden_Dawn"
            },
            {
                "name": "Theosophy",
                "description": "Mystical philosophy blending Eastern and Western esotericism.",
                "key_texts": ["The Secret Doctrine by Helena Blavatsky"],
                "reference_link": "https://www.theosophical.org/"
            },
            {
                "name": "Rosicrucianism",
                "description": "Mystical Christian order focused on alchemy and enlightenment.",
                "key_texts": ["Fama Fraternitatis"],
                "reference_link": "https://en.wikipedia.org/wiki/Rosicrucianism"
            },
            {
                "name": "Freemasonry",
                "description": "Fraternal order with esoteric symbols and rituals.",
                "key_texts": ["Morals and Dogma by Albert Pike"],
                "reference_link": "https://www.ugle.org.uk/"
            },
            {
                "name": "Chaos Magic",
                "description": "Postmodern magical practice emphasizing belief as a tool.",
                "key_texts": ["Liber Null & Psychonaut by Peter J. Carroll"],
                "reference_link": "https://en.wikipedia.org/wiki/Chaos_magic"
            }
        ],
        "deities_figures": [
            {
                "name": "Dion Fortune",
                "type": "Occultist",
                "description": "British occultist known for psychic protection and mystical qabalah.",
                "link": "https://en.wikipedia.org/wiki/Dion_Fortune"
            },
            {
                "name": "Ancestors",
                "type": "Spirits",
                "description": "Works with the dead but tests their authenticity."
            },
            {
                "name": "Hecate",
                "type": "Greek goddess",
                "description": "Goddess of magic, crossroads, and the night.",
                "link": "https://www.theoi.com/Khthonios/Hekate.html"
            }
        ],
        "cultural_references": [
            "Spitalfields Huguenot community",
            "Society for Psychical Research",
            "1920s-30s London séance culture",
            "Court dressmaking / West End tailoring",
            "London courts (self-representation)",
            "Eclectic boarding house life"
        ],
        "primary_tools": ["Needle", "Thread", "Scissors", "Pins", "Fabric", "Black mirror"],
        "spell_types": ["Shadow work", "Protection", "Banishing", "Divination", "Ancestor work", "Transformation"]
    }
}

# Thread color correspondences for Katherine's textile magic
THREAD_CORRESPONDENCES = {
    "red": {
        "meanings": ["Life force", "Protection", "Blood ties", "Passion", "Courage"],
        "use_for": ["Protection spells", "Binding", "Ancestor work", "Courage rituals"]
    },
    "black": {
        "meanings": ["Banishing", "Absorption", "Shadow work", "Protection", "Mystery"],
        "use_for": ["Cutting cords", "Absorbing negativity", "Shadow integration", "Scrying cloth"]
    },
    "white": {
        "meanings": ["Purification", "Spirit contact", "Clarity", "New beginnings"],
        "use_for": ["Spirit communication", "Cleansing", "Fresh starts"]
    },
    "gold": {
        "meanings": ["Success", "Abundance", "Solar energy", "Confidence"],
        "use_for": ["Prosperity work", "Confidence building", "Solar rituals"]
    },
    "silver": {
        "meanings": ["Intuition", "Moon magic", "Psychic protection", "Dreams"],
        "use_for": ["Dream work", "Intuition enhancement", "Lunar rituals"]
    },
    "green": {
        "meanings": ["Growth", "Healing", "Nature", "Prosperity"],
        "use_for": ["Healing work", "Growth rituals", "Nature connection"]
    },
    "blue": {
        "meanings": ["Peace", "Communication", "Truth", "Protection"],
        "use_for": ["Calming work", "Communication spells", "Truth seeking"]
    },
    "purple": {
        "meanings": ["Spirituality", "Psychic power", "Royalty", "Transformation"],
        "use_for": ["Spiritual development", "Psychic work", "Transformation"]
    }
}

# Bird correspondences for Shigg's Parliament
BIRD_CORRESPONDENCES = {
    "zebra_finch": {
        "meanings": ["Joy in the ordinary", "Resilience", "Community", "Song"],
        "appears_when": ["Needing to find joy in small things", "Building community", "Celebrating daily life"],
        "shigg_voice": "Ah, the zebra finch—my own dear companion. They remind us that the smallest songs carry the greatest comfort."
    },
    "cockatiel": {
        "meanings": ["Communication", "Companionship", "Bright spirits", "Cheerfulness"],
        "appears_when": ["Needing connection", "Seeking to express oneself", "Lifting spirits"],
        "shigg_voice": "The cockatiel whistles through any trouble. They teach us that a cheerful word can change everything, dear heart."
    },
    "magpie": {
        "meanings": ["Mystery", "Duality", "Secrets", "Fortune"],
        "appears_when": ["Facing choices", "Uncovering secrets", "Navigating duality"],
        "shigg_voice": "One for sorrow, two for joy... the magpie knows that life holds both, and neither lasts forever."
    },
    "crow": {
        "meanings": ["Intelligence", "Memory", "Ancestral wisdom", "Protection", "Transformation"],
        "appears_when": ["Needing wisdom", "Connecting with ancestors", "Facing change"],
        "shigg_voice": "The crow remembers what we forget. They've watched over Crowlands Avenue since long before we arrived."
    },
    "robin": {
        "meanings": ["Renewal", "Hope", "Comfort after loss", "New beginnings"],
        "appears_when": ["Grieving", "Starting fresh", "Needing hope"],
        "shigg_voice": "The robin visits your windowsill to remind you that spring returns, love, even after the longest winter."
    },
    "dove": {
        "meanings": ["Peace", "Healing", "Spiritual messages", "Gentleness"],
        "appears_when": ["Seeking peace", "Healing rifts", "Receiving guidance"],
        "shigg_voice": "The dove carries what words cannot. Let its gentle presence be your answer."
    },
    "sparrow": {
        "meanings": ["Humility", "Community", "Strength in numbers", "Resilience"],
        "appears_when": ["Feeling alone", "Building support", "Finding strength in simplicity"],
        "shigg_voice": "The sparrow survives where showier birds fail. There's power in being ordinary, dear heart."
    },
    "wren": {
        "meanings": ["Resourcefulness", "Creativity", "Small joys", "Cunning"],
        "appears_when": ["Needing creative solutions", "Making do", "Finding hidden opportunities"],
        "shigg_voice": "The tiny wren builds the grandest nest. Never underestimate what small hands can do."
    },
    "owl": {
        "meanings": ["Wisdom", "Discernment", "Seeing through illusion", "Night knowledge"],
        "appears_when": ["Needing clarity", "Facing deception", "Seeking deeper truth"],
        "shigg_voice": "The owl sees what daylight hides. Be still, dear heart, and let your eyes adjust to the dark."
    },
    "blackbird": {
        "meanings": ["Mystical awareness", "Liminal spaces", "Gateway", "Song at twilight"],
        "appears_when": ["At thresholds", "Seeking mystical connection", "Dawn or dusk moments"],
        "shigg_voice": "The blackbird sings at the edges—dawn and dusk, when the veil is thin. Listen carefully."
    },
    "goldfinch": {
        "meanings": ["Joy", "Beauty", "Lightness", "Celebration"],
        "appears_when": ["Needing brightness", "Celebrating", "Finding beauty"],
        "shigg_voice": "The goldfinch flashes by to remind us that beauty exists even in dark times. Let yourself see it."
    },
    "raven": {
        "meanings": ["Prophecy", "Magic", "Death and rebirth", "The Morrigan's messenger"],
        "appears_when": ["Major transformation", "Facing endings", "Deep magical work"],
        "shigg_voice": "The raven carries messages between worlds. When they appear, something is shifting, love."
    }
}

# Talisman correspondences for Cathleen
TALISMAN_CORRESPONDENCES = {
    "silver_rabbit": {
        "meanings": ["Luck", "Fertility", "Moon magic", "Quick thinking"],
        "find_where": "Antique shops, charity shops, jewellers",
        "how_to_use": "Carry in left pocket or pin near heart",
        "cathleen_voice": "Find yourself a little silver rabbit, love. Rub it when you need luck—it never fails."
    },
    "lucky_button": {
        "meanings": ["Personal protection", "Continuity", "Connection to loved ones"],
        "find_where": "Your own sewing box, a loved one's clothes",
        "how_to_use": "Keep in pocket; touch when anxious",
        "cathleen_voice": "A button from someone who loved you. That's protection, that is."
    },
    "brooch": {
        "meanings": ["Protection of the heart", "Beauty as armor", "Family legacy"],
        "find_where": "Inherited, antique shops, meaningful gifts",
        "how_to_use": "Pin near your heart, especially when facing difficulty",
        "cathleen_voice": "A beautiful brooch isn't vanity—it's armor for the heart."
    },
    "crow_feather": {
        "meanings": ["Transformation", "Morrigan connection", "Messages from beyond"],
        "find_where": "Found naturally, never taken",
        "how_to_use": "Keep on altar or in special place; hold during spirit work",
        "cathleen_voice": "When a crow feather finds you, keep it safe. The Morrigan has marked you for transformation."
    },
    "significant_stone": {
        "meanings": ["Grounding", "Place-memory", "Earth connection"],
        "find_where": "A meaningful location—home, beach, sacred site",
        "how_to_use": "Carry for grounding; hold during anxiety",
        "cathleen_voice": "A stone from a place that matters carries that place's strength with you."
    },
    "silver_owl": {
        "meanings": ["Wisdom", "Night vision", "Seeing truth"],
        "find_where": "Jewellers, antique shops",
        "how_to_use": "Wear or carry when needing clarity",
        "cathleen_voice": "The owl sees in darkness. Carry one when you need to see what's hidden."
    }
}

def get_archetype_data(archetype_id):
    """Get the full reference data for an archetype"""
    return ARCHETYPE_REFERENCE_DATA.get(archetype_id, {})

def get_random_movements(archetype_id, count=3):
    """Get random movements from an archetype for spell generation"""
    import random
    data = ARCHETYPE_REFERENCE_DATA.get(archetype_id, {})
    movements = data.get("movements", [])
    return random.sample(movements, min(count, len(movements)))

def get_bird_oracle(situation_keywords):
    """Select appropriate bird based on situation"""
    import random
    # Simple keyword matching - could be made smarter
    grief_birds = ["robin", "dove", "crow"]
    joy_birds = ["zebra_finch", "cockatiel", "goldfinch"]
    wisdom_birds = ["owl", "crow", "raven"]
    change_birds = ["raven", "crow", "blackbird"]
    
    # Default to random selection from Parliament
    return random.choice(list(BIRD_CORRESPONDENCES.keys()))

def get_talisman_suggestion(spell_type):
    """Suggest appropriate talisman for spell type"""
    import random
    return random.choice(list(TALISMAN_CORRESPONDENCES.keys()))

def get_thread_color(intention):
    """Suggest thread color for Katherine's textile magic"""
    intention_map = {
        "protection": ["red", "black"],
        "healing": ["green", "white"],
        "love": ["red", "pink"],
        "prosperity": ["gold", "green"],
        "spirit_work": ["white", "silver", "purple"],
        "banishing": ["black"],
        "transformation": ["purple", "black"],
        "peace": ["blue", "white"],
        "courage": ["red", "gold"]
    }
    import random
    colors = intention_map.get(intention, list(THREAD_CORRESPONDENCES.keys()))
    return random.choice(colors)
